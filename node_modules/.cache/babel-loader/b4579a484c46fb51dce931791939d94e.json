{"ast":null,"code":"import _classCallCheck from \"C:\\\\_dev\\\\React\\\\charts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\_dev\\\\React\\\\charts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\_dev\\\\React\\\\charts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\_dev\\\\React\\\\charts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\_dev\\\\React\\\\charts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\_dev\\\\React\\\\charts\\\\src\\\\Components\\\\linechart.jsx\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nvar LineCHart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LineCHart, _Component);\n\n  function LineCHart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LineCHart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LineCHart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.DrawChart = function () {\n      var margin = {\n        top: 20,\n        right: 30,\n        bottom: 45,\n        left: 50\n      };\n      var width = _this.props.width - margin.left - margin.right;\n      var height = _this.props.height - margin.top - margin.bottom;\n      var parseTime = d3.timeParse('%d.%m.%Y'); // IAM, DCI, HOLDING\n\n      var colors = [\"#D31409\", \"#0068B4\", \"#E05206\"];\n      var buffer = [];\n      var bufferline;\n      var maxX = 0;\n      var data = _this.props.data.data;\n      var keys = Object.keys(data[0]); // copy data object into array, \n\n      data.forEach(function (d, i) {\n        buffer.push(Object.values(d)); // format the date string into date type\n\n        buffer[i][0] = parseTime(buffer[i][0]);\n\n        for (var j = 1; j < buffer[0].length; j++) {\n          if (typeof buffer[i][j] != 'number') {\n            // number string into int\n            buffer[i][j] = parseInt(buffer[i][j]);\n\n            if (buffer[i][j] > maxX) {\n              maxX = buffer[i][j];\n            }\n          }\n        }\n      }); // manipulate svg and create group\n\n      var svg = d3.select('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', \"translate(\".concat(margin.left, \",\").concat(margin.top, \")\")); // splits data array into arrays\n      // e.g. array[date, value1, value2] = array[date, value1] & array[date, value2] \n\n      var _loop = function _loop(i) {\n        bufferline = [];\n\n        for (var j = 0; j < buffer.length; j++) {\n          var fusionArray = [];\n          fusionArray[0] = buffer[j][0];\n          fusionArray[1] = buffer[j][i];\n          bufferline.push(fusionArray);\n        }\n\n        var x = d3.scaleTime().domain(d3.extent(buffer, function (d) {\n          return d[0];\n        })).range([0, width]);\n        var y = d3.scaleLinear().domain([0, maxX]).range([height, 0]); // define the line\n\n        var line = d3.line().x(function (d) {\n          return x(d[0]);\n        }).y(function (d) {\n          return y(d[1]);\n        }).curve(d3.curveMonotoneX); // add the line\n\n        svg.append('g').attr('class', 'lineContainer').append('path').data([bufferline]).attr('class', 'line').attr('d', line).attr('fill', 'none').attr('stroke', colors[i - 1]).attr('stroke-width', '1.5') // append text for line when mouse over\n        .on('mouseover', function () {\n          svg.append('text').attr('class', 'title').attr('font-family', 'sans-serif').attr('font-weight', 'bold').attr('fill', colors[i - 1]).text(keys[i]).attr('x', width / 2).attr('y', 5);\n        }).on('mouseout', function () {\n          svg.select('.title').remove();\n        }); // add the dots  \n\n        svg.selectAll('.lineContainer').selectAll('circle').data(bufferline).enter().append('circle').attr('class', 'dot').attr('cx', function (d) {\n          return x(d[0]);\n        }).attr('cy', function (d) {\n          return y(d[1]);\n        }).attr('r', '3').attr('fill', colors[i - 1]); // add the x axis\n\n        svg.append('g').attr('transform', \"translate(0,\".concat(height, \")\")).call(d3.axisBottom(x).tickFormat(d3.timeFormat('%d.%m.%Y'))); // add the y axis\n\n        svg.append('g').call(d3.axisLeft(y));\n      };\n\n      for (var i = 1; i < buffer[0].length; i++) {\n        _loop(i);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(LineCHart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.DrawChart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"svg\", {\n        className: \"svgLineChart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return LineCHart;\n}(Component);\n\nexport { LineCHart as default };","map":{"version":3,"sources":["C:\\_dev\\React\\charts\\src\\Components\\linechart.jsx"],"names":["React","Component","d3","LineCHart","DrawChart","margin","top","right","bottom","left","width","props","height","parseTime","timeParse","colors","buffer","bufferline","maxX","data","keys","Object","forEach","d","i","push","values","j","length","parseInt","svg","select","attr","append","fusionArray","x","scaleTime","domain","extent","range","y","scaleLinear","line","curve","curveMonotoneX","on","text","remove","selectAll","enter","call","axisBottom","tickFormat","timeFormat","axisLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport * as d3 from 'd3'\r\n\r\nexport default class LineCHart extends Component {\r\n\r\n  componentDidMount() {\r\n    this.DrawChart()\r\n  }\r\n\r\n  DrawChart = () => {\r\n    const margin = {top: 20, right: 30, bottom: 45, left: 50}\r\n    const width = this.props.width - margin.left - margin.right\r\n    const height = this.props.height - margin.top - margin.bottom\r\n    let parseTime = d3.timeParse('%d.%m.%Y')\r\n    // IAM, DCI, HOLDING\r\n    let colors = [\"#D31409\", \"#0068B4\", \"#E05206\"]\r\n    let buffer = []\r\n    let bufferline\r\n    let maxX = 0\r\n    let data = this.props.data.data\r\n    let keys = Object.keys(data[0])\r\n\r\n    // copy data object into array, \r\n    data.forEach((d,i) => {\r\n      buffer.push(Object.values(d))\r\n      // format the date string into date type\r\n      buffer[i][0] = parseTime(buffer[i][0])\r\n      for(let j = 1; j < buffer[0].length; j++){\r\n        if(typeof buffer[i][j] != 'number'){\r\n          // number string into int\r\n          buffer[i][j] = parseInt(buffer[i][j])\r\n          if(buffer[i][j] > maxX){\r\n            maxX = buffer[i][j]\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // manipulate svg and create group\r\n    let svg = d3.select('svg')\r\n      .attr('width', width + margin.left + margin.right)\r\n      .attr('height', height + margin.top + margin.bottom)\r\n      .append('g')\r\n      .attr('transform',\r\n            `translate(${margin.left},${margin.top})`)\r\n  \r\n    // splits data array into arrays\r\n    // e.g. array[date, value1, value2] = array[date, value1] & array[date, value2] \r\n    for(let i = 1; i < buffer[0].length; i++){\r\n      bufferline = []\r\n      for(let j = 0; j < buffer.length; j++){\r\n        let fusionArray = []\r\n        fusionArray[0] = buffer[j][0]\r\n        fusionArray[1] = buffer[j][i]\r\n        bufferline.push(fusionArray)\r\n      }\r\n\r\n      let x = d3.scaleTime()\r\n        .domain(d3.extent(buffer, d => d[0]))\r\n        .range([0, width])\r\n\r\n\r\n      let y = d3.scaleLinear()\r\n        .domain([0, maxX])\r\n        .range([height, 0])\r\n\r\n      // define the line\r\n      let line = d3.line()\r\n        .x(d => x(d[0]))\r\n        .y(d => y(d[1]))\r\n        .curve(d3.curveMonotoneX)\r\n      \r\n      // add the line\r\n      svg.append('g')\r\n        .attr('class', 'lineContainer')\r\n        .append('path')\r\n        .data([bufferline])\r\n        .attr('class', 'line')\r\n        .attr('d', line)\r\n        .attr('fill', 'none')\r\n        .attr('stroke', colors[i-1])\r\n        .attr('stroke-width', '1.5')\r\n        // append text for line when mouse over\r\n        .on('mouseover', () => {\r\n          svg.append('text')\r\n            .attr('class', 'title')\r\n            .attr('font-family', 'sans-serif')\r\n            .attr('font-weight', 'bold')\r\n            .attr('fill', colors[i-1])\r\n            .text(keys[i])\r\n            .attr('x', width/2)\r\n            .attr('y', 5)\r\n        })\r\n        .on('mouseout', () => {\r\n          svg.select('.title').remove()\r\n        })\r\n        \r\n      // add the dots  \r\n      svg.selectAll('.lineContainer').selectAll('circle')\r\n        .data(bufferline).enter()\r\n        .append('circle')\r\n        .attr('class', 'dot')\r\n        .attr('cx', d => x(d[0]))\r\n        .attr('cy', d => y(d[1]))\r\n        .attr('r', '3')\r\n        .attr('fill', colors[i-1])  \r\n\r\n      // add the x axis\r\n      svg.append('g')\r\n        .attr('transform', `translate(0,${height})`)\r\n        .call(d3.axisBottom(x).tickFormat(d3.timeFormat('%d.%m.%Y')))\r\n\r\n      // add the y axis\r\n      svg.append('g')\r\n        .call(d3.axisLeft(y))\r\n\r\n    } \r\n    \r\n  }\r\n\r\n  render() {\r\n    return <svg className=\"svgLineChart\"></svg>\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}